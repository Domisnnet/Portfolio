<div
  class="artifact-card"
  [class.is-flipped]="isFlipped()"
  (click)="toggleFlip()"
>
  <div class="artifact-inner">
    <div class="artifact-face artifact-front">
      <div class="artifact-photo">
        <img
          [src]="project().image"
          [alt]="project().title"
          loading="lazy"
        />
        <div class="alien-scan-marker">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <filter id="glow">
                <feGaussianBlur stdDeviation="0.5" result="coloredBlur"/>
                <feMerge>
                  <feMergeNode in="coloredBlur"/>
                  <feMergeNode in="SourceGraphic"/>
                </feMerge>
              </filter>
            </defs>
            <g filter="url(#glow)" stroke="cyan" stroke-width="1.2" stroke-linecap="round">
              <path d="M12 8l3.5 2v4L12 16l-3.5-2v-4z">
                <animateTransform 
                  attributeName="transform" 
                  type="scale" 
                  values="1; 1.1; 1" 
                  dur="3s" 
                  repeatCount="indefinite" 
                  additive="sum" 
                  pivot="12 12" />
              </path>
              <g>
                <path d="M12 2l2 3h-4l2-3z" /> <path d="M12 22l-2-3h4l-2 3z" /> <path d="M2 12l3-2v4l-3-2z" /> <path d="M22 12l-3 2v-4l3 2z" /> <animateTransform 
                  attributeName="transform" 
                  type="rotate" 
                  from="0 12 12" 
                  to="360 12 12" 
                  dur="20s" 
                  repeatCount="indefinite" />
              </g>
              <path d="M7 7l-1-1M17 17l1 1M17 7l1-1M7 17l-1-1" stroke-dasharray="2 2">
                <animate 
                  attributeName="stroke-opacity" 
                  values="1; 0.2; 1" 
                  dur="2s" 
                  repeatCount="indefinite" />
              </path>
            </g>
          </svg>
        </div>
      </div>
      <span class="handwritten-label">
        {{ project().title }}
      </span>
    </div>
    <div class="artifact-face artifact-back">
      <div class="artifact-header">
        <h3>{{ project().title }}</h3>
        <p>{{ project().description }}</p>
      </div>
      <div class="artifact-stack">
        @for (pill of pills(); track pill.key) {
          <app-stack-pill
            [label]="pill.label"
            [iconPath]="pill.iconPath"
            [category]="pill.category"
          />
        }
      </div>
      <div class="artifact-action">
        @if (project().link) {
          <a
            class="artifact-button"
            [href]="project().link"
            target="_blank"
            rel="noopener noreferrer"
            (click)="$event.stopPropagation()"
          >
            Ver Projeto
          </a>
        }
      </div>
    </div>
  </div>
</div>