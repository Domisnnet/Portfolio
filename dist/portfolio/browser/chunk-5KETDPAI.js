import{Ib as d,Na as r,U as a,ib as o,qb as h,ra as n,rb as c}from"./chunk-3V2NV3HS.js";var l=["starsCanvas"],m=class i{canvasRef=d.required("starsCanvas");hostRef=a(n);ctx;dpr=window.devicePixelRatio||1;width=0;height=0;stars=[];animationId;STAR_COUNT_FULL=420;STAR_COUNT_MINIMAL=180;MIN_RADIUS=.4;MAX_RADIUS=1.6;MIN_SPEED=.008;MAX_SPEED=.03;ngAfterViewInit(){this.initCanvas(),this.createStars(),this.animate(),window.addEventListener("resize",this.onResize)}ngOnDestroy(){this.animationId&&cancelAnimationFrame(this.animationId),window.removeEventListener("resize",this.onResize)}initCanvas(){let t=this.canvasRef().nativeElement,e=this.hostRef.nativeElement.getBoundingClientRect();this.width=e.width,this.height=e.height,t.width=Math.floor(this.width*this.dpr),t.height=Math.floor(this.height*this.dpr),t.style.width=`${this.width}px`,t.style.height=`${this.height}px`,this.ctx=t.getContext("2d"),this.ctx.setTransform(this.dpr,0,0,this.dpr,0,0)}createStars(){let t=this.getEffectsMode()==="minimal"?this.STAR_COUNT_MINIMAL:this.STAR_COUNT_FULL;this.stars=Array.from({length:t},()=>({x:Math.random()*this.width,y:Math.random()*this.height,radius:Math.random()*(this.MAX_RADIUS-this.MIN_RADIUS)+this.MIN_RADIUS,opacity:Math.random()*.5+.25,speed:Math.random()*(this.MAX_SPEED-this.MIN_SPEED)+this.MIN_SPEED,dir:Math.random()>.5?1:-1}))}animate=()=>{if(this.getEffectsMode()==="silent"){this.ctx.clearRect(0,0,this.width,this.height);return}this.draw(),this.update(),this.animationId=requestAnimationFrame(this.animate)};draw(){this.ctx.clearRect(0,0,this.width,this.height);let t=this.getStarColor();for(let e of this.stars)this.ctx.globalAlpha=e.opacity,this.ctx.fillStyle=t,this.ctx.beginPath(),this.ctx.arc(e.x,e.y,e.radius,0,Math.PI*2),this.ctx.fill();this.ctx.globalAlpha=1}update(){for(let t of this.stars)t.opacity+=t.speed*t.dir,(t.opacity<=.2||t.opacity>=.85)&&(t.dir*=-1)}getStarColor(){let t=getComputedStyle(document.documentElement),e=t.getPropertyValue("--stars-df").trim()||t.getPropertyValue("--star-color").trim();if(!e)throw new Error("[CosmicStars] Missing CSS contract: --stars-df or --star-color");return e}getEffectsMode(){return document.documentElement.getAttribute("data-cosmic-effects")||"full"}onResize=()=>{this.initCanvas(),this.createStars()};static \u0275fac=function(e){return new(e||i)};static \u0275cmp=r({type:i,selectors:[["app-cosmic-stars"]],viewQuery:function(e,s){e&1&&h(s.canvasRef,l,5),e&2&&c()},decls:2,vars:0,consts:[["starsCanvas",""],["aria-hidden","true",1,"stars-canvas"]],template:function(e,s){e&1&&o(0,"canvas",1,0)},styles:["[_nghost-%COMP%]{position:absolute;inset:0;pointer-events:none;z-index:var(--z-stars)}canvas[_ngcontent-%COMP%]{display:block;width:100%;height:100%}"],changeDetection:0})};export{m as a};
